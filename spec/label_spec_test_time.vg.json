{
  "$schema": "https://vega.github.io/schema/vega/v4.json",
  "width": 1000,
  "height": 1000,

  "data": [
    {
      "name": "drive",
      "url": "../data/test_label_10000.json"
    },
    {
      "name": "table",
      "values": [
        {"category": "A", "amount": 0},
        {"category": "B", "amount": 1},
        {"category": "C", "amount": 2},
        {"category": "D", "amount": 3},
        {"category": "E", "amount": 4},
        {"category": "F", "amount": 5},
        {"category": "G", "amount": 6},
        {"category": "H", "amount": 7}
      ]
    }
  ],

  "scales": [
    {
      "name": "x",
      "type": "linear",
      "domain": {"data": "drive", "field": "miles"},
      "range": "width",
      "nice": true,
      "zero": false,
      "round": true
    },
    {
      "name": "y",
      "type": "linear",
      "domain": {"data": "drive", "field": "gas"},
      "range": "height",
      "nice": true,
      "zero": false,
      "round": true
    },
    {
      "name": "xscale",
      "type": "band",
      "domain": {"data": "table", "field": "category"},
      "range": "width",
      "padding": 0.05,
      "round": true
    },
    {
      "name": "yscale",
      "domain": {"data": "table", "field": "amount"},
      "nice": true,
      "range": "height"
    }
  ],

  "marks": [
    {
      "type": "symbol",
      "from": {"data":"table"},
      "name": "bar",
      "encode": {
        "enter": {
          "xc": {"scale": "xscale", "field": "category"},
          "yc": {"scale": "yscale", "field": "amount"},
          "size": {"value": 20000}
        },
        "update": {
          "fill": {"value": "steelblue"}
        }
      }
    },
    {
      "type": "symbol",
      "from": {"data": "drive"},
      "name": "point",
      "encode": {
        "enter": {
          "x": {"scale": "x", "field": "miles"},
          "y": {"scale": "y", "field": "gas"},
          "fill": {"value": "#fff"},
          "stroke": {"value": "#000"},
          "strokeWidth": {"value": 1},
          "size": {"value": 2}
        }
      }
    },
    {
      "type": "text",
      "from": {"data": "point"},
      "encode": {
        "enter": {
          "x": {"field": "x"},
          "y": {"field": "y"},
          "fill": {"value": "#000"},
          "text": {"field": "datum.year"},
          "fontSize": {"value": 14}
        }
      },
      "transform": [{
        "type": "label",
        "size": [1000, 1000],
        "avoidMarks": ["bar"]
      }]
    }
  ]
}